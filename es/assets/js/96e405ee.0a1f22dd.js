"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1392],{9613:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>m});var o=a(9496);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function s(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?s(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,o,t=function(e,n){if(null==e)return{};var a,o,t={},s=Object.keys(e);for(o=0;o<s.length;o++)a=s[o],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)a=s[o],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var r=o.createContext({}),p=function(e){var n=o.useContext(r),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},c=function(e){var n=p(e.components);return o.createElement(r.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},u=o.forwardRef((function(e,n){var a=e.components,t=e.mdxType,s=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(a),m=t,k=u["".concat(r,".").concat(m)]||u[m]||d[m]||s;return a?o.createElement(k,i(i({ref:n},c),{},{components:a})):o.createElement(k,i({ref:n},c))}));function m(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var s=a.length,i=new Array(s);i[0]=u;var l={};for(var r in n)hasOwnProperty.call(n,r)&&(l[r]=n[r]);l.originalType=e,l.mdxType="string"==typeof e?e:t,i[1]=l;for(var p=2;p<s;p++)i[p]=a[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},8654:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var o=a(2962),t=a(2742),s=(a(9496),a(9613)),i=["components"],l={id:"faq",title:"Preguntas Frecuentes"},r=void 0,p={unversionedId:"faq",id:"version-7.x/faq",title:"Preguntas Frecuentes",description:"\xbfPor qu\xe9 mi node_modules usa espacio en disco si los paquetes se almacenan en una tienda global?",source:"@site/i18n/es/docusaurus-plugin-content-docs/version-7.x/faq.md",sourceDirName:".",slug:"/faq",permalink:"/es/faq",draft:!1,editUrl:"https://crowdin.com/project/pnpm/es-ES",tags:[],version:"7.x",frontMatter:{id:"faq",title:"Preguntas Frecuentes"}},c={},d=[{value:"\xbfPor qu\xe9 mi <code>node_modules</code> usa espacio en disco si los paquetes se almacenan en una tienda global?",id:"por-qu\xe9-mi-node_modules-usa-espacio-en-disco-si-los-paquetes-se-almacenan-en-una-tienda-global",level:2},{value:"\xbfFunciona en Windows?",id:"funciona-en-windows",level:2},{value:"\xbfPero el anidado de <code>node_modules</code> es incompatible con Windows?",id:"pero-el-anidado-de-node_modules-es-incompatible-con-windows",level:2},{value:"\xbfQu\xe9 pasa con los enlaces simb\xf3licos circulares?",id:"qu\xe9-pasa-con-los-enlaces-simb\xf3licos-circulares",level:2},{value:"\xbfPor qu\xe9 tener enlaces duros en absoluto? \xbfPor qu\xe9 no enlazar directamente con el almac\xe9n global?",id:"por-qu\xe9-tener-enlaces-duros-en-absoluto-por-qu\xe9-no-enlazar-directamente-con-el-almac\xe9n-global",level:2},{value:"\xbfpnpm funciona a trav\xe9s de varios discos o sistemas de archivos?",id:"pnpm-funciona-a-trav\xe9s-de-varios-discos-o-sistemas-de-archivos",level:2},{value:"La ruta el almac\xe9n est\xe1 especificada",id:"la-ruta-el-almac\xe9n-est\xe1-especificada",level:3},{value:"La ruta el almac\xe9n NO est\xe1 especificada",id:"la-ruta-el-almac\xe9n-no-est\xe1-especificada",level:3},{value:"\xbfQu\xe9 significa <code>pnpm</code>?",id:"qu\xe9-significa-pnpm",level:2},{value:"\xbf<code>pnpm</code> no funciona con &lt;TU-PROYECTO-AQU\xcd&gt;?",id:"pnpm-no-funciona-con-tu-proyecto-aqu\xed",level:2},{value:"Soluci\xf3n 1",id:"soluci\xf3n-1",level:3},{value:"Soluci\xf3n 2",id:"soluci\xf3n-2",level:3},{value:"Soluci\xf3n 3",id:"soluci\xf3n-3",level:3}],u={toc:d};function m(e){var n=e.components,a=(0,t.Z)(e,i);return(0,s.kt)("wrapper",(0,o.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"por-qu\xe9-mi-node_modules-usa-espacio-en-disco-si-los-paquetes-se-almacenan-en-una-tienda-global"},"\xbfPor qu\xe9 mi ",(0,s.kt)("inlineCode",{parentName:"h2"},"node_modules")," usa espacio en disco si los paquetes se almacenan en una tienda global?"),(0,s.kt)("p",null,"pnpm crea ",(0,s.kt)("a",{parentName:"p",href:"https://es.wikipedia.org/wiki/Enlace_duro"},"enlaces duros")," desde el almac\xe9n global a las carpetas ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules"),". Los enlaces duros apuntan al mismo lugar en el disco donde se encuentran los archivos originales. Entonces, por ejemplo, si tiene ",(0,s.kt)("inlineCode",{parentName:"p"},"foo")," en su proyecto como una dependencia y ocupa 1 Mb de espacio, entonces parecer\xe1 que ocupa 1 Mb de espacio en ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," del proyecto y la misma cantidad de espacio en el almac\xe9n global. Sin embargo, ese 1 Mb es ",(0,s.kt)("em",{parentName:"p"},"el mismo espacio")," en el disco direccionado desde dos ubicaciones diferentes. Entonces, en total, ",(0,s.kt)("inlineCode",{parentName:"p"},"foo")," ocupa 1 Mb, no 2 Mb."),(0,s.kt)("p",null,"Para m\xe1s sobre este tema:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://unix.stackexchange.com/questions/88423/why-do-hard-links-seem-to-take-the-same-space-as-the-originals"},"\xbfPor qu\xe9 los enlaces duros parecen ocupar el mismo espacio que los originales?")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://gist.github.com/zkochan/106cfef49f8476b753a9cbbf9c65aff1"},"Un hilo de la sala de chat de pnpm")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://github.com/pnpm/pnpm/issues/794"},"Un issue en el repositorio de pnpm"))),(0,s.kt)("h2",{id:"funciona-en-windows"},"\xbfFunciona en Windows?"),(0,s.kt)("p",null,"Respuesta corta: S\xed. Respuesta larga: el uso de enlaces simb\xf3licos en Windows es problem\xe1tico, por decir lo menos, sin embargo, pnpm tiene una soluci\xf3n. Para Windows, usamos ",(0,s.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/win32/fileio/hard-links-and-junctions"},"junctions")," en su lugar."),(0,s.kt)("h2",{id:"pero-el-anidado-de-node_modules-es-incompatible-con-windows"},"\xbfPero el anidado de ",(0,s.kt)("inlineCode",{parentName:"h2"},"node_modules")," es incompatible con Windows?"),(0,s.kt)("p",null,"Las primeras versiones de npm ten\xedan problemas debido al anidamiento de todos los ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," (consulte ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/nodejs/node-v0.x-archive/issues/6960"},"este issue"),"). Sin embargo, pnpm no crea carpetas profundas, almacena todos los paquetes de forma plana y usa enlaces simb\xf3licos para crear la estructura de \xe1rbol de dependencia."),(0,s.kt)("h2",{id:"qu\xe9-pasa-con-los-enlaces-simb\xf3licos-circulares"},"\xbfQu\xe9 pasa con los enlaces simb\xf3licos circulares?"),(0,s.kt)("p",null,"Aunque pnpm utiliza enlaces para poner dependencias en carpetas ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules"),", se evita el uso enlaces simb\xf3licos circulares porque los paquetes principales se colocan en el mismo ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," en el que est\xe1n sus dependencias. As\xed que las dependencias de ",(0,s.kt)("inlineCode",{parentName:"p"},"foo")," no est\xe1n en ",(0,s.kt)("inlineCode",{parentName:"p"},"foo/node_modules"),", sino que ",(0,s.kt)("inlineCode",{parentName:"p"},"foo")," est\xe1 en ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," junto con sus propias dependencias."),(0,s.kt)("h2",{id:"por-qu\xe9-tener-enlaces-duros-en-absoluto-por-qu\xe9-no-enlazar-directamente-con-el-almac\xe9n-global"},"\xbfPor qu\xe9 tener enlaces duros en absoluto? \xbfPor qu\xe9 no enlazar directamente con el almac\xe9n global?"),(0,s.kt)("p",null,"Un paquete puede tener diferentes conjuntos de dependencias en una m\xe1quina."),(0,s.kt)("p",null,"En el proyecto ",(0,s.kt)("strong",{parentName:"p"},"A")," ",(0,s.kt)("inlineCode",{parentName:"p"},"foo@1.0.0")," puede tener una dependencia resuelta en ",(0,s.kt)("inlineCode",{parentName:"p"},"bar@1.0.0"),", pero en el proyecto ",(0,s.kt)("strong",{parentName:"p"},"B")," la misma dependencia de ",(0,s.kt)("inlineCode",{parentName:"p"},"foo")," podr\xeda resolverse en ",(0,s.kt)("inlineCode",{parentName:"p"},"bar@1.1.0"),"; entonces, pnpm vincula ",(0,s.kt)("inlineCode",{parentName:"p"},"foo@1.0.0")," a cada proyecto donde se usa, para crear diferentes conjuntos de dependencias para \xe9l."),(0,s.kt)("p",null,"Los enlaces simb\xf3licos directos al almac\xe9n global funcionar\xedan con el flag ",(0,s.kt)("inlineCode",{parentName:"p"},"--preserve-symlinks")," de Node; sin embargo, ese enfoque viene con bastantes problemas propios, por lo que decidimos seguir con los enlaces duros. Para obtener m\xe1s detalles sobre por qu\xe9 se tom\xf3 esta decisi\xf3n, consulte ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/nodejs/node-eps/issues/46"},"este issue"),"."),(0,s.kt)("h2",{id:"pnpm-funciona-a-trav\xe9s-de-varios-discos-o-sistemas-de-archivos"},"\xbfpnpm funciona a trav\xe9s de varios discos o sistemas de archivos?"),(0,s.kt)("p",null,"El almac\xe9n de paquetes debe estar en el mismo disco y sistema de archivos que las instalaciones, de lo contrario, los paquetes se copiar\xe1n, no se vincular\xe1n. Esto se debe a una limitaci\xf3n en c\xf3mo funcionan los enlaces duros, en el sentido de que un archivo en un sistema de archivos no puede dirigirse a una ubicaci\xf3n en otro. Consulte el ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/pnpm/pnpm/issues/712"},"Issue #712")," para obtener m\xe1s detalles."),(0,s.kt)("p",null,"pnpm funciona de forma diferente en los 2 casos siguientes:"),(0,s.kt)("h3",{id:"la-ruta-el-almac\xe9n-est\xe1-especificada"},"La ruta el almac\xe9n est\xe1 especificada"),(0,s.kt)("p",null,"Si la ruta del almac\xe9n se especifica a trav\xe9s de ",(0,s.kt)("a",{parentName:"p",href:"/es/configuring"},"la configuraci\xf3n del mismo"),", entonces se realiza la copia entre el almac\xe9n y cualquier proyecto que est\xe9 en un disco diferente."),(0,s.kt)("p",null,"Si ejecuta ",(0,s.kt)("inlineCode",{parentName:"p"},"pnpm install")," en el disco ",(0,s.kt)("inlineCode",{parentName:"p"},"A"),", entonces el almac\xe9n de pnpm debe estar en el disco ",(0,s.kt)("inlineCode",{parentName:"p"},"A"),". Si la tienda pnpm se encuentra en el disco ",(0,s.kt)("inlineCode",{parentName:"p"},"B"),", se copiar\xe1n todos los paquetes necesarios directamente en la ubicaci\xf3n del proyecto en lugar de vincularse. Esto inhibe severamente los beneficios de almacenamiento y rendimiento de pnpm."),(0,s.kt)("h3",{id:"la-ruta-el-almac\xe9n-no-est\xe1-especificada"},"La ruta el almac\xe9n NO est\xe1 especificada"),(0,s.kt)("p",null,"Si no se establece la ruta del almac\xe9n, se crean varios (uno por disco o sistema de archivos)."),(0,s.kt)("p",null,"Si la instalaci\xf3n se ejecuta en el disco ",(0,s.kt)("inlineCode",{parentName:"p"},"A"),", el almac\xe9n ser\xe1 creado en ",(0,s.kt)("inlineCode",{parentName:"p"},"A")," ",(0,s.kt)("inlineCode",{parentName:"p"},".pnpm-store")," en la ra\xedz del sistema de archivos.  Si luego la instalaci\xf3n se ejecuta en el disco ",(0,s.kt)("inlineCode",{parentName:"p"},"B"),", se crear\xe1 un almac\xe9n independiente en ",(0,s.kt)("inlineCode",{parentName:"p"},"B")," en ",(0,s.kt)("inlineCode",{parentName:"p"},".pnpm-store"),". Los proyectos a\xfan mantendr\xedan los beneficios de pnpm, pero cada disco puede tener paquetes redundantes."),(0,s.kt)("h2",{id:"qu\xe9-significa-pnpm"},"\xbfQu\xe9 significa ",(0,s.kt)("inlineCode",{parentName:"h2"},"pnpm"),"?"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"pnpm")," significa ",(0,s.kt)("inlineCode",{parentName:"p"},"performant npm"),', en espa\xf1ol, "npm rendidor". ',(0,s.kt)("a",{parentName:"p",href:"https://github.com/rstacruz/"},"@rstacruz")," es a quien se le ocurri\xf3 el nombre."),(0,s.kt)("h2",{id:"pnpm-no-funciona-con-tu-proyecto-aqu\xed"},"\xbf",(0,s.kt)("inlineCode",{parentName:"h2"},"pnpm")," no funciona con ","<","TU-PROYECTO-AQU\xcd>?"),(0,s.kt)("p",null,"En la mayor\xeda de los casos, significa que una de las dependencias requiere paquetes no declarados en ",(0,s.kt)("inlineCode",{parentName:"p"},"paquete.json"),". Es un error com\xfan causado por ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," plano. Si esto sucede, se trata de un error en la dependencia y se debe arreglar la misma. Esto puede tomar un buen tiempo, por lo que pnpm proporciona alternativas para hacer funcionar los paquetes con errores."),(0,s.kt)("h3",{id:"soluci\xf3n-1"},"Soluci\xf3n 1"),(0,s.kt)("p",null,"In case there are issues, you can use the ",(0,s.kt)("a",{parentName:"p",href:"npmrc#node-linker"},(0,s.kt)("inlineCode",{parentName:"a"},"node-linker=hoisted"))," setting. This creates a flat ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules")," structure similar to the one created by ",(0,s.kt)("inlineCode",{parentName:"p"},"npm"),"."),(0,s.kt)("h3",{id:"soluci\xf3n-2"},"Soluci\xf3n 2"),(0,s.kt)("p",null,"In the following example, a dependency does ",(0,s.kt)("strong",{parentName:"p"},"not")," have the ",(0,s.kt)("inlineCode",{parentName:"p"},"iterall")," module in its own list of deps."),(0,s.kt)("p",null,"The easiest solution to resolve missing dependencies of the buggy packages is to ",(0,s.kt)("strong",{parentName:"p"},"add ",(0,s.kt)("inlineCode",{parentName:"strong"},"iterall")," as a dependency to our project's ",(0,s.kt)("inlineCode",{parentName:"strong"},"package.json")),"."),(0,s.kt)("p",null,"You can do so, by installing it via ",(0,s.kt)("inlineCode",{parentName:"p"},"pnpm add iterall"),", and will be automatically added to your project's ",(0,s.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'  "dependencies": {\n    ...\n    "iterall": "^1.2.2",\n    ...\n  }\n')),(0,s.kt)("h3",{id:"soluci\xf3n-3"},"Soluci\xf3n 3"),(0,s.kt)("p",null,"One of the solutions is to use ",(0,s.kt)("a",{parentName:"p",href:"/es/pnpmfile#hooks"},"hooks")," for adding the missing dependencies to the package's ",(0,s.kt)("inlineCode",{parentName:"p"},"package.json"),"."),(0,s.kt)("p",null,"An example was ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/pnpm/pnpm/issues/1043"},"Webpack Dashboard")," which wasn't working with ",(0,s.kt)("inlineCode",{parentName:"p"},"pnpm"),". It has since been resolved such that it works with ",(0,s.kt)("inlineCode",{parentName:"p"},"pnpm")," now."),(0,s.kt)("p",null,"It used to throw an error:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-console"},"Error: Cannot find module 'babel-traverse'\n  at /node_modules/inspectpack@2.2.3/node_modules/inspectpack/lib/actions/parse\n")),(0,s.kt)("p",null,"The problem was that ",(0,s.kt)("inlineCode",{parentName:"p"},"babel-traverse")," was used in ",(0,s.kt)("inlineCode",{parentName:"p"},"inspectpack")," which was used by ",(0,s.kt)("inlineCode",{parentName:"p"},"webpack-dashboard"),", but ",(0,s.kt)("inlineCode",{parentName:"p"},"babel-traverse")," wasn't specified in ",(0,s.kt)("inlineCode",{parentName:"p"},"inspectpack"),"'s ",(0,s.kt)("inlineCode",{parentName:"p"},"package.json"),". It still worked with ",(0,s.kt)("inlineCode",{parentName:"p"},"npm")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"yarn")," because they create flat ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules"),"."),(0,s.kt)("p",null,"The solution was to create a ",(0,s.kt)("inlineCode",{parentName:"p"},".pnpmfile.cjs")," with the following contents:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  hooks: {\n    readPackage: (pkg) => {\n      if (pkg.name === \"inspectpack\") {\n        pkg.dependencies['babel-traverse'] = '^6.26.0';\n      }\n      return pkg;\n    }\n  }\n};\n")),(0,s.kt)("p",null,"After creating a ",(0,s.kt)("inlineCode",{parentName:"p"},".pnpmfile.cjs"),", delete ",(0,s.kt)("inlineCode",{parentName:"p"},"pnpm-lock.yaml")," only - there is no need to delete ",(0,s.kt)("inlineCode",{parentName:"p"},"node_modules"),", as pnpm hooks only affect module resolution. Then, rebuild the dependencies & it should be working."))}m.isMDXComponent=!0}}]);